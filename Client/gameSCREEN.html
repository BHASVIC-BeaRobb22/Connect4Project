<!DOCTYPE html>

<head>

    <title>Connect 4 || Game Room</title>
    <link rel = "stylesheet" href = "styles.css">
    <script src = "/socket.io/socket.io.js"></script>
    <script>
        var socket = io("http://localhost:8080");
    </script>

</head>


<body>

    <div class = "gameBoard">

        <div class = "space" type = "button"></div>
        <div class = "space" type = "button"></div>
        <div class = "space" type = "button"></div>
        <div class = "space" type = "button"></div>
        <div class = "space" type = "button"></div>
        <div class = "space" type = "button"></div>
        <div class = "space" type = "button"></div>
        
        <div class = "space" type = "button"></div>
        <div class = "space" type = "button"></div>
        <div class = "space" type = "button"></div>
        <div class = "space" type = "button"></div>
        <div class = "space" type = "button"></div>
        <div class = "space" type = "button"></div>
        <div class = "space" type = "button"></div>

        <div class = "space" type = "button"></div>
        <div class = "space" type = "button"></div>
        <div class = "space" type = "button"></div>
        <div class = "space" type = "button"></div>
        <div class = "space" type = "button"></div>
        <div class = "space" type = "button"></div>
        <div class = "space" type = "button"></div>

        <div class = "space" type = "button"></div>
        <div class = "space" type = "button"></div>
        <div class = "space" type = "button"></div>
        <div class = "space" type = "button"></div>
        <div class = "space" type = "button"></div>
        <div class = "space" type = "button"></div>
        <div class = "space" type = "button"></div>
        
        <div class = "space" type = "button"></div>
        <div class = "space" type = "button"></div>
        <div class = "space" type = "button"></div>
        <div class = "space" type = "button"></div>
        <div class = "space" type = "button"></div>
        <div class = "space" type = "button"></div>
        <div class = "space" type = "button"></div>

        <div class = "space" type = "button"></div>
        <div class = "space" type = "button"></div>
        <div class = "space" type = "button"></div>
        <div class = "space" type = "button"></div>
        <div class = "space" type = "button"></div>
        <div class = "space" type = "button"></div>
        <div class = "space" type = "button"></div>

    </div>


    <script>
        var codeText = window.location.href.split('=')[1];
        let space = document.getElementsByClassName("space");
        

        socket.emit("roomCheck", codeText);
        socket.emit("connectPlayersToGame", codeText);

        socket.on("playersConnected", () => {
            socket.emit("startGame", codeText);
            
            socket.on("playerSetupDone", () => {
                let id = socket.id;
                for (let index = 0; index < space.length; index++) {
                space[index].addEventListener("click", () => {
                    socket.emit("spacePressed", id);
                });
            }
                
        });

    });
    
        </script>



 
    <script src = "mainCLIENT.js"></script>
</body>